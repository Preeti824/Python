<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Donation Management System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-weight: 700;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .system-info {
            font-size: 0.9rem;
            opacity: 0.8;
            border-top: 1px solid rgba(255,255,255,0.2);
            padding-top: 15px;
            margin-top: 15px;
        }

        .status-online {
            color: #28a745;
            font-weight: bold;
        }

        .nav-tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            background: #f8f9fa;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            border-right: 1px solid #dee2e6;
        }

        .nav-tab:last-child {
            border-right: none;
        }

        .nav-tab.active {
            background: #dc3545;
            color: white;
        }

        .nav-tab:hover:not(.active) {
            background: #e9ecef;
        }

        .content {
            background: white;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            min-height: 600px;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #dc3545;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: #dc3545;
            color: white;
        }

        .btn-primary:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #495057;
        }

        tr:hover {
            background: #f8f9fa;
        }

        .blood-type {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            color: white;
            background: #dc3545;
        }

        .status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.875rem;
            font-weight: 600;
        }

        .status.available {
            background: #d4edda;
            color: #155724;
        }

        .status.low {
            background: #fff3cd;
            color: #856404;
        }

        .status.critical {
            background: #f8d7da;
            color: #721c24;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .stat-card p {
            opacity: 0.9;
        }

        .search-bar {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-bar input,
        .search-bar select {
            flex: 1;
            min-width: 200px;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .system-description {
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            border-left: 5px solid #dc3545;
        }

        .description-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .description-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-top: 3px solid #dc3545;
        }

        .description-card h3 {
            color: #dc3545;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .description-card p {
            line-height: 1.6;
            color: #495057;
            margin-bottom: 10px;
        }

        .description-card ul {
            padding-left: 20px;
            color: #495057;
        }

        .description-card li {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .section-header {
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
            color: white;
            border-radius: 10px;
            text-align: center;
        }

        .section-header h2 {
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .section-header p {
            opacity: 0.9;
            font-size: 1rem;
            line-height: 1.5;
        }

        .footer {
            margin-top: 50px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border-radius: 15px;
            overflow: hidden;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            padding: 40px 30px;
        }

        .footer-section h4 {
            color: #ecf0f1;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .footer-section p {
            opacity: 0.8;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .footer-bottom {
            background: rgba(0,0,0,0.2);
            padding: 20px 30px;
            text-align: center;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .footer-bottom p {
            margin: 0;
            opacity: 0.7;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                border-right: none;
                border-bottom: 1px solid #dee2e6;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .search-bar {
                flex-direction: column;
            }

            .search-bar input,
            .search-bar select {
                min-width: auto;
            }

            .description-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü©∏ Blood Donation Management System</h1>
            <p>Professional Healthcare Solution for Blood Bank Operations</p>
            <div class="system-info">
                <p><strong>Version:</strong> 2.0 | <strong>Last Updated:</strong> <span id="currentDate"></span> | <strong>Status:</strong> <span class="status-online">Online</span></p>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showTab('donors')">Donor Registration</button>
            <button class="nav-tab" onclick="showTab('donations')">Donations</button>
            <button class="nav-tab" onclick="showTab('inventory')">Blood Inventory</button>
            <button class="nav-tab" onclick="showTab('search')">Search</button>
        </div>

        <div class="content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="system-description">
                    <h2>üè• Blood Donation Management System</h2>
                    <div class="description-grid">
                        <div class="description-card">
                            <h3>üìã System Overview</h3>
                            <p>A comprehensive healthcare solution designed for blood banks, hospitals, and donation centers. This system streamlines donor management, tracks blood inventory, and ensures efficient blood donation operations with real-time monitoring capabilities.</p>
                        </div>
                        <div class="description-card">
                            <h3>üéØ Key Features</h3>
                            <ul>
                                <li>Complete donor registration and profile management</li>
                                <li>Real-time blood inventory tracking with status alerts</li>
                                <li>Donation history and scheduling system</li>
                                <li>Advanced search and filtering capabilities</li>
                                <li>Automated inventory updates and critical level warnings</li>
                                <li>Professional dashboard with comprehensive analytics</li>
                            </ul>
                        </div>
                        <div class="description-card">
                            <h3>üí° Technology Stack</h3>
                            <p><strong>Frontend:</strong> HTML5, CSS3 with modern styling, Responsive Design<br>
                            <strong>Scripting:</strong> Vanilla JavaScript with ES6+ features<br>
                            <strong>Data Storage:</strong> LocalStorage with SQL-like operations<br>
                            <strong>Architecture:</strong> Single Page Application (SPA) with modular components</p>
                        </div>
                        <div class="description-card">
                            <h3>üîí Security & Compliance</h3>
                            <p>Built with healthcare data privacy in mind. All donor information is stored locally with no external data transmission. The system follows medical data handling best practices and includes validation for all critical operations.</p>
                        </div>
                    </div>
                </div>
                
                <h2>üìä Dashboard Overview</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="totalDonors">0</h3>
                        <p>Total Donors</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="totalDonations">0</h3>
                        <p>Total Donations</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="availableUnits">0</h3>
                        <p>Available Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="criticalTypes">0</h3>
                        <p>Critical Blood Types</p>
                    </div>
                </div>

                <h3>Recent Donations</h3>
                <div class="table-container">
                    <table id="recentDonationsTable">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Donor Name</th>
                                <th>Blood Type</th>
                                <th>Units</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Donor Registration Tab -->
            <div id="donors" class="tab-content">
                <div class="section-header">
                    <h2>üë§ Donor Registration System</h2>
                    <p>Register new blood donors with comprehensive profile management. All fields marked with (*) are required for successful registration.</p>
                </div>
                <div id="donorAlert"></div>
                
                <form id="donorForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="donorName">Full Name *</label>
                            <input type="text" id="donorName" required>
                        </div>
                        <div class="form-group">
                            <label for="donorAge">Age *</label>
                            <input type="number" id="donorAge" min="18" max="65" required>
                        </div>
                        <div class="form-group">
                            <label for="donorGender">Gender *</label>
                            <select id="donorGender" required>
                                <option value="">Select Gender</option>
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                                <option value="Other">Other</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="donorBloodType">Blood Type *</label>
                            <select id="donorBloodType" required>
                                <option value="">Select Blood Type</option>
                                <option value="A+">A+</option>
                                <option value="A-">A-</option>
                                <option value="B+">B+</option>
                                <option value="B-">B-</option>
                                <option value="AB+">AB+</option>
                                <option value="AB-">AB-</option>
                                <option value="O+">O+</option>
                                <option value="O-">O-</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="donorPhone">Phone Number *</label>
                            <input type="tel" id="donorPhone" required>
                        </div>
                        <div class="form-group">
                            <label for="donorEmail">Email</label>
                            <input type="email" id="donorEmail">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="donorAddress">Address *</label>
                        <textarea id="donorAddress" rows="3" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Register Donor</button>
                    <button type="button" class="btn btn-secondary" onclick="clearDonorForm()">Clear Form</button>
                </form>

                <h3>Registered Donors</h3>
                <div class="table-container">
                    <table id="donorsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Name</th>
                                <th>Age</th>
                                <th>Gender</th>
                                <th>Blood Type</th>
                                <th>Phone</th>
                                <th>Last Donation</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Donations Tab -->
            <div id="donations" class="tab-content">
                <div class="section-header">
                    <h2>ü©∏ Donation Recording System</h2>
                    <p>Record and track blood donations with automatic inventory updates. Enter the donor ID to quickly process donations and maintain accurate records.</p>
                </div>
                <div id="donationAlert"></div>
                
                <form id="donationForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="donationDonorId">Donor ID *</label>
                            <input type="text" id="donationDonorId" required>
                        </div>
                        <div class="form-group">
                            <label for="donationDate">Donation Date *</label>
                            <input type="date" id="donationDate" required>
                        </div>
                        <div class="form-group">
                            <label for="donationUnits">Units Donated *</label>
                            <input type="number" id="donationUnits" min="1" max="4" value="1" required>
                        </div>
                        <div class="form-group">
                            <label for="donationNotes">Notes</label>
                            <textarea id="donationNotes" rows="2"></textarea>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Record Donation</button>
                    <button type="button" class="btn btn-secondary" onclick="clearDonationForm()">Clear Form</button>
                </form>

                <h3>Donation History</h3>
                <div class="table-container">
                    <table id="donationsTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Donor ID</th>
                                <th>Donor Name</th>
                                <th>Blood Type</th>
                                <th>Date</th>
                                <th>Units</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Blood Inventory Tab -->
            <div id="inventory" class="tab-content">
                <div class="section-header">
                    <h2>üè• Blood Inventory Management</h2>
                    <p>Monitor blood stock levels in real-time with automated alerts for critical inventory levels. Track all blood types with comprehensive status monitoring.</p>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3 id="inventoryA+">0</h3>
                        <p>A+ Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryA-">0</h3>
                        <p>A- Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryB+">0</h3>
                        <p>B+ Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryB-">0</h3>
                        <p>B- Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryAB+">0</h3>
                        <p>AB+ Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryAB-">0</h3>
                        <p>AB- Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryO+">0</h3>
                        <p>O+ Units</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="inventoryO-">0</h3>
                        <p>O- Units</p>
                    </div>
                </div>

                <h3>Inventory Details</h3>
                <div class="table-container">
                    <table id="inventoryTable">
                        <thead>
                            <tr>
                                <th>Blood Type</th>
                                <th>Available Units</th>
                                <th>Status</th>
                                <th>Last Updated</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- Search Tab -->
            <div id="search" class="tab-content">
                <div class="section-header">
                    <h2>üîç Advanced Search & Filter System</h2>
                    <p>Quickly locate donors using advanced search capabilities. Filter by name, blood type, or other criteria to find the information you need efficiently.</p>
                </div>
                
                <div class="search-bar">
                    <input type="text" id="searchName" placeholder="Search by name...">
                    <select id="searchBloodType">
                        <option value="">All Blood Types</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                    <button class="btn btn-primary" onclick="performSearch()">Search</button>
                    <button class="btn btn-secondary" onclick="clearSearch()">Clear</button>
                </div>

                <h3>Search Results</h3>
                <div class="table-container">
                    <table id="searchResultsTable">
                        <thead>
                            <tr>
                                <th>Donor ID</th>
                                <th>Name</th>
                                <th>Blood Type</th>
                                <th>Phone</th>
                                <th>Last Donation</th>
                                <th>Total Donations</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Blood Donation Management System</h4>
                    <p>Professional healthcare solution for blood bank operations</p>
                </div>
                <div class="footer-section">
                    <h4>System Information</h4>
                    <p>Version 2.0 | Built with HTML5, CSS3, JavaScript</p>
                    <p>Designed for healthcare professionals</p>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <p>For technical support and inquiries</p>
                    <p>Contact your system administrator</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Blood Donation Management System. All rights reserved. | Developed for healthcare excellence.</p>
            </div>
        </footer>
    </div>

    <script>
        /**
         * Blood Donation Management System - Professional Healthcare Solution
         * 
         * This system provides comprehensive blood bank management capabilities including:
         * - Donor registration and profile management
         * - Blood donation tracking and recording
         * - Real-time inventory management with alerts
         * - Advanced search and filtering capabilities
         * - Professional dashboard with analytics
         * 
         * Technology Stack: HTML5, CSS3, Vanilla JavaScript, LocalStorage
         * Architecture: Single Page Application with modular components
         * Data Storage: Client-side with SQL-like operations simulation
         */

        // Professional database simulation using localStorage for healthcare data management
        class BloodDonationDB {
            constructor() {
                this.donors = JSON.parse(localStorage.getItem('donors')) || [];
                this.donations = JSON.parse(localStorage.getItem('donations')) || [];
                this.inventory = JSON.parse(localStorage.getItem('inventory')) || this.initializeInventory();
                this.nextDonorId = parseInt(localStorage.getItem('nextDonorId')) || 1;
                this.nextDonationId = parseInt(localStorage.getItem('nextDonationId')) || 1;
            }

            initializeInventory() {
                const bloodTypes = ['A+', 'A-', 'B+', 'B-', 'AB+', 'AB-', 'O+', 'O-'];
                return bloodTypes.map(type => ({
                    bloodType: type,
                    units: Math.floor(Math.random() * 20) + 5,
                    lastUpdated: new Date().toISOString().split('T')[0]
                }));
            }

            save() {
                localStorage.setItem('donors', JSON.stringify(this.donors));
                localStorage.setItem('donations', JSON.stringify(this.donations));
                localStorage.setItem('inventory', JSON.stringify(this.inventory));
                localStorage.setItem('nextDonorId', this.nextDonorId.toString());
                localStorage.setItem('nextDonationId', this.nextDonationId.toString());
            }

            addDonor(donor) {
                donor.id = this.nextDonorId++;
                donor.registrationDate = new Date().toISOString().split('T')[0];
                donor.lastDonation = null;
                this.donors.push(donor);
                this.save();
                return donor;
            }

            addDonation(donation) {
                const donor = this.donors.find(d => d.id == donation.donorId);
                if (!donor) return null;

                donation.id = this.nextDonationId++;
                donation.donorName = donor.name;
                donation.bloodType = donor.bloodType;
                this.donations.push(donation);

                // Update donor's last donation
                donor.lastDonation = donation.date;

                // Update inventory
                const inventoryItem = this.inventory.find(i => i.bloodType === donor.bloodType);
                if (inventoryItem) {
                    inventoryItem.units += parseInt(donation.units);
                    inventoryItem.lastUpdated = new Date().toISOString().split('T')[0];
                }

                this.save();
                return donation;
            }

            getDonors() {
                return this.donors;
            }

            getDonations() {
                return this.donations;
            }

            getInventory() {
                return this.inventory;
            }

            searchDonors(name, bloodType) {
                return this.donors.filter(donor => {
                    const nameMatch = !name || donor.name.toLowerCase().includes(name.toLowerCase());
                    const bloodMatch = !bloodType || donor.bloodType === bloodType;
                    return nameMatch && bloodMatch;
                });
            }

            getDonorDonationCount(donorId) {
                return this.donations.filter(d => d.donorId == donorId).length;
            }
        }

        // Initialize database
        const db = new BloodDonationDB();

        // Tab functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            // Update content based on tab
            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'donors') updateDonorsTable();
            if (tabName === 'donations') updateDonationsTable();
            if (tabName === 'inventory') updateInventoryDisplay();
            if (tabName === 'search') clearSearch();
        }

        // Donor registration
        document.getElementById('donorForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const donor = {
                name: document.getElementById('donorName').value,
                age: parseInt(document.getElementById('donorAge').value),
                gender: document.getElementById('donorGender').value,
                bloodType: document.getElementById('donorBloodType').value,
                phone: document.getElementById('donorPhone').value,
                email: document.getElementById('donorEmail').value,
                address: document.getElementById('donorAddress').value
            };

            const addedDonor = db.addDonor(donor);
            showAlert('donorAlert', Donor registered successfully! ID: ${addedDonor.id}, 'success');
            clearDonorForm();
            updateDonorsTable();
            updateDashboard();
        });

        // Donation recording
        document.getElementById('donationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const donation = {
                donorId: parseInt(document.getElementById('donationDonorId').value),
                date: document.getElementById('donationDate').value,
                units: parseInt(document.getElementById('donationUnits').value),
                notes: document.getElementById('donationNotes').value
            };

            const addedDonation = db.addDonation(donation);
            if (addedDonation) {
                showAlert('donationAlert', 'Donation recorded successfully!', 'success');
                clearDonationForm();
                updateDonationsTable();
                updateDashboard();
                updateInventoryDisplay();
            } else {
                showAlert('donationAlert', 'Error: Donor ID not found!', 'danger');
            }
        });

        // Update dashboard
        function updateDashboard() {
            const donors = db.getDonors();
            const donations = db.getDonations();
            const inventory = db.getInventory();

            document.getElementById('totalDonors').textContent = donors.length;
            document.getElementById('totalDonations').textContent = donations.length;
            document.getElementById('availableUnits').textContent = inventory.reduce((sum, item) => sum + item.units, 0);
            document.getElementById('criticalTypes').textContent = inventory.filter(item => item.units < 10).length;

            // Update recent donations table
            const recentDonations = donations.slice(-5).reverse();
            const tbody = document.querySelector('#recentDonationsTable tbody');
            tbody.innerHTML = '';

            recentDonations.forEach(donation => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${donation.date}</td>
                    <td>${donation.donorName}</td>
                    <td><span class="blood-type">${donation.bloodType}</span></td>
                    <td>${donation.units}</td>
                    <td><span class="status available">Processed</span></td>
                `;
            });
        }

        // Update donors table
        function updateDonorsTable() {
            const donors = db.getDonors();
            const tbody = document.querySelector('#donorsTable tbody');
            tbody.innerHTML = '';

            donors.forEach(donor => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${donor.id}</td>
                    <td>${donor.name}</td>
                    <td>${donor.age}</td>
                    <td>${donor.gender}</td>
                    <td><span class="blood-type">${donor.bloodType}</span></td>
                    <td>${donor.phone}</td>
                    <td>${donor.lastDonation || 'Never'}</td>
                    <td>
                        <button class="btn btn-success" onclick="quickDonation(${donor.id})">Quick Donate</button>
                    </td>
                `;
            });
        }

        // Update donations table
        function updateDonationsTable() {
            const donations = db.getDonations();
            const tbody = document.querySelector('#donationsTable tbody');
            tbody.innerHTML = '';

            donations.reverse().forEach(donation => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${donation.id}</td>
                    <td>${donation.donorId}</td>
                    <td>${donation.donorName}</td>
                    <td><span class="blood-type">${donation.bloodType}</span></td>
                    <td>${donation.date}</td>
                    <td>${donation.units}</td>
                    <td>${donation.notes || '-'}</td>
                `;
            });
        }

        // Update inventory display
        function updateInventoryDisplay() {
            const inventory = db.getInventory();
            
            // Update stat cards
            inventory.forEach(item => {
                const element = document.getElementById(inventory${item.bloodType});
                if (element) {
                    element.textContent = item.units;
                }
            });

            // Update inventory table
            const tbody = document.querySelector('#inventoryTable tbody');
            tbody.innerHTML = '';

            inventory.forEach(item => {
                const row = tbody.insertRow();
                let status = 'available';
                let statusText = 'Available';
                
                if (item.units < 5) {
                    status = 'critical';
                    statusText = 'Critical';
                } else if (item.units < 10) {
                    status = 'low';
                    statusText = 'Low Stock';
                }

                row.innerHTML = `
                    <td><span class="blood-type">${item.bloodType}</span></td>
                    <td>${item.units}</td>
                    <td><span class="status ${status}">${statusText}</span></td>
                    <td>${item.lastUpdated}</td>
                    <td>
                        <button class="btn btn-primary" onclick="adjustInventory('${item.bloodType}', 1)">+1</button>
                        <button class="btn btn-secondary" onclick="adjustInventory('${item.bloodType}', -1)">-1</button>
                    </td>
                `;
            });
        }

        // Search functionality
        function performSearch() {
            const name = document.getElementById('searchName').value;
            const bloodType = document.getElementById('searchBloodType').value;
            const results = db.searchDonors(name, bloodType);
            
            const tbody = document.querySelector('#searchResultsTable tbody');
            tbody.innerHTML = '';

            results.forEach(donor => {
                const donationCount = db.getDonorDonationCount(donor.id);
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${donor.id}</td>
                    <td>${donor.name}</td>
                    <td><span class="blood-type">${donor.bloodType}</span></td>
                    <td>${donor.phone}</td>
                    <td>${donor.lastDonation || 'Never'}</td>
                    <td>${donationCount}</td>
                `;
            });
        }

        function clearSearch() {
            document.getElementById('searchName').value = '';
            document.getElementById('searchBloodType').value = '';
            document.querySelector('#searchResultsTable tbody').innerHTML = '';
        }

        // Utility functions
        function clearDonorForm() {
            document.getElementById('donorForm').reset();
        }

        function clearDonationForm() {
            document.getElementById('donationForm').reset();
            document.getElementById('donationDate').value = new Date().toISOString().split('T')[0];
        }

        function showAlert(containerId, message, type) {
            const container = document.getElementById(containerId);
            container.innerHTML = <div class="alert alert-${type}">${message}</div>;
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        function quickDonation(donorId) {
            showTab('donations');
            document.getElementById('donationDonorId').value = donorId;
            document.getElementById('donationDate').value = new Date().toISOString().split('T')[0];
            document.querySelector('.nav-tab:nth-child(3)').classList.add('active');
        }

        function adjustInventory(bloodType, change) {
            const inventory = db.getInventory();
            const item = inventory.find(i => i.bloodType === bloodType);
            if (item) {
                item.units = Math.max(0, item.units + change);
                item.lastUpdated = new Date().toISOString().split('T')[0];
                db.save();
                updateInventoryDisplay();
                updateDashboard();
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date in header
            document.getElementById('currentDate').textContent = new Date().toLocaleDateString();
            
            // Set default donation date to today
            document.getElementById('donationDate').value = new Date().toISOString().split('T')[0];
            
            // Load initial data
            updateDashboard();
            updateDonorsTable();
            updateDonationsTable();
            updateInventoryDisplay();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9654b37af30f7ec7',t:'MTc1MzU0MTMzOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>